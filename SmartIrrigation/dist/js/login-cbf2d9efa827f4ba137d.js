(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{214:function(t,e,i){"use strict";i.r(e);var s=i(215),r=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);e.default=r.a},215:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i(578),i(580);var s=a(i(567)),r=a(i(569)),n=a(i(42)),o=i(56);function a(t){return t&&t.__esModule?t:{default:t}}e.default={name:"loginApp",data:function(){return{userName:"",userPassword:"",verifyCode:"",errmsgTip:"error",isShowErrmsgTop:!1,verifyCodeImageUrl:"",imageCodeId:"",h:window.outerHeight,isOpenKeyboard:!1}},methods:{login:function(){var t=this;console.log(this.userName,this.userPassword),this.$axios.post("users/sessions",{user_name:this.userName,password:this.userPassword,verify_code:this.verifyCode,verify_code_id:this.imageCodeId},{headers:{"X-CSRFTOKEN":n.default.getCookie("csrf_token")}}).then(function(e){console.log(e),e.data.errno==o.RET.OK?location.href="/index.html":(t.errmsgTip=e.data.errmsg,t.isShowErrmsgTop=!0,t.generateImageCode())}).catch(function(e){t.errmsgTip="登陆失败，请检查网络。",t.isShowErrmsgTop=!0,alert(e)})},generateImageCode:function(){this.imageCodeId=n.default.generateUUID(),this.verifyCodeImageUrl="/api/v1.0/image_codes/"+this.imageCodeId},checkParams:function(){}},created:function(){this.generateImageCode(),this.$axios.get("csrf")},mounted:function(){var t=this;this.h=window.outerHeight,window.onresize=function(){window.outerHeight<t.h&&(t.isOpenKeyboard=!0),window.outerHeight>=t.h&&(t.isOpenKeyboard=!1)};var e=window.location.search.split("=");"?d"==e[0]&&"nologin"==e[1]&&(this.errmsgTip="您还没有登陆",this.isShowErrmsgTop=!0)},watch:{userName:function(t,e){t.length<4?(this.isShowErrmsgTop=!0,this.errmsgTip="用户名太短"):t.length>10?(this.isShowErrmsgTop=!0,this.errmsgTip="用户名太长"):(this.isShowErrmsgTop=!1,this.errmsgTip="")},userPassword:function(t){t.length<4?(this.isShowErrmsgTop=!0,this.errmsgTip="密码太短"):t.length>16?(this.isShowErrmsgTop=!0,this.errmsgTip="密码太长"):(this.isShowErrmsgTop=!1,this.errmsgTip="")},verifyCode:function(t){4!=t.length?(this.isShowErrmsgTop=!0,this.errmsgTip="验证码长度不正确"):(this.isShowErrmsgTop=!1,this.errmsgTip="")}},components:{Header:s.default,Footer:r.default}}},216:function(t,e,i){"use strict";i.r(e);var s=i(217),r=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);e.default=r.a},217:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},218:function(t,e,i){"use strict";i.r(e);var s=i(219),r=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);e.default=r.a},219:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["isOpenKeyboard"]}},220:function(t,e,i){var s=i(571);"string"==typeof s&&(s=[[t.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};i(241)(s,r);s.locals&&(t.exports=s.locals)},268:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"login-app"}},[i("Header"),t._v(" "),i("div",{staticClass:"section-login white"},[i("div",{staticClass:"container"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col s12 offset-m2 m8 card-panel"},[t._m(0),t._v(" "),i("form",{staticClass:"col s12",attrs:{id:"login-form"}},[i("div",{staticClass:"row"},[i("div",{staticClass:"input-field col s12"},[i("i",{staticClass:"material-icons prefix"},[t._v("person")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],staticClass:"validate",attrs:{id:"user-name",name:"emailcontact",type:"text",placeholder:"用户名"},domProps:{value:t.userName},on:{input:function(e){e.target.composing||(t.userName=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"input-field col s12"},[i("i",{staticClass:"material-icons prefix"},[t._v("lock")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.userPassword,expression:"userPassword"}],staticClass:"validate",attrs:{id:"password",name:"emailcontact",type:"password",placeholder:"密码"},domProps:{value:t.userPassword},on:{input:function(e){e.target.composing||(t.userPassword=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"col s6 image-code"},[i("img",{staticStyle:{float:"right"},attrs:{src:t.verifyCodeImageUrl,alt:""},on:{click:function(e){t.generateImageCode()}}})]),t._v(" "),i("div",{staticClass:"input-field col s6"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.verifyCode,expression:"verifyCode"}],staticClass:"validate",attrs:{id:"verify-code",type:"text",placeholder:"验证码"},domProps:{value:t.verifyCode},on:{input:function(e){e.target.composing||(t.verifyCode=e.target.value)}}})]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.isShowErrmsgTop,expression:"isShowErrmsgTop"}],staticClass:"login-error"},[t._v(t._s(t.errmsgTip))]),t._v(" "),i("div",{staticClass:"col offset-s7 s5"},[i("button",{staticClass:"btn waves-effect waves-light white light-green-text text-darken-2 right",attrs:{type:"submit"},on:{click:function(e){e.preventDefault(),t.login()}}},[t._v("\n\t\t\t\t\t\t\t\t\t登陆 "),i("i",{staticClass:"mdi mdi-send right text-darken-2"})])])])])])])])]),t._v(" "),i("Footer",{attrs:{isOpenKeyboard:t.isOpenKeyboard}})],1)},r=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"center"},[e("h4",[this._v("登陆")]),this._v(" "),e("p",{staticClass:"hide-on-small-only"},[this._v("以管理员登陆，或者普通用户登陆。")]),this._v(" "),e("p",[this._v("默认用户:admin， 默认密码:alonebo")])])}];s._withStripped=!0,i.d(e,"a",function(){return s}),i.d(e,"b",function(){return r})},271:function(t,e,i){"use strict";var s=function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:!this.isOpenKeyboard,expression:"!isOpenKeyboard"}],staticClass:"page-footer"},[this._m(0)])])},r=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"footer-copyright"},[e("div",{staticClass:"container"},[this._v("\n\t\t\t\t© 2018 AloneBo\n\t\t\t\t"),e("a",{staticClass:"grey-text text-lighten-4 right",attrs:{href:"http://flask.pocoo.org/"}},[this._v("Powered by Flask")])])])}];s._withStripped=!0,i.d(e,"a",function(){return s}),i.d(e,"b",function(){return r})},274:function(t,e,i){"use strict";var s=function(){var t=this.$createElement;this._self._c;return this._m(0)},r=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("header",[e("div",{staticClass:"navbar-fixed"},[e("nav",[e("div",{staticClass:"nav-wrapper container"},[e("a",{staticClass:"brand-logo",staticStyle:{"font-size":"1.5rem"},attrs:{href:"#!"}},[this._v("智能灌溉系统")]),this._v(" "),e("ul",{staticClass:"right hide-on-med-and-down"},[e("li",[e("a",{attrs:{href:"#"}},[this._v("帮助")])]),this._v(" "),e("li",[e("a",{attrs:{href:"#"}},[this._v("联系作者")])])])])])])])])}];s._withStripped=!0,i.d(e,"a",function(){return s}),i.d(e,"b",function(){return r})},42:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={checkLogin:function(){console.log("检查登陆...")},generateUUID:function(){var t=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?i:3&i|8).toString(16)})},getCookie:function(t){var e=document.cookie.match("\\b"+t+"=([^;]*)\\b");return e?e[1]:void 0}}},56:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RET=void 0;var s,r=i(242),n=(s=r)&&s.__esModule?s:{default:s};e.RET=new function t(){(0,n.default)(this,t),this.OK="0",this.DBERR="4001",this.NODATA="4002",this.DATAEXIST="4003",this.DATAERR="4004",this.SESSIONERR="4101",this.LOGINERR="4102",this.PARAMERR="4103",this.USERERR="4104",this.ROLEERR="4105",this.PWDERR="4106",this.REQERR="4201",this.IPERR="4202",this.THIRDERR="4301",this.IOERR="4302",this.SERVERERR="4500",this.UNKOWNERR="4501"}},565:function(t,e,i){"use strict";var s=o(i(41)),r=o(i(566)),n=o(i(238));function o(t){return t&&t.__esModule?t:{default:t}}console.log("route page init"),n.default.defaults.baseURL="/api/v1.0/",s.default.prototype.$axios=n.default,new s.default({el:"#app",render:function(t){return t(r.default)}})},566:function(t,e,i){"use strict";i.r(e);var s=i(268),r=i(214);for(var n in r)"default"!==n&&function(t){i.d(e,t,function(){return r[t]})}(n);i(572);var o=i(2),a=Object(o.a)(r.default,s.a,s.b,!1,null,"ef68022e",null);a.options.__file="src/components/Login.vue",e.default=a.exports},567:function(t,e,i){"use strict";i.r(e);var s=i(274),r=i(216);for(var n in r)"default"!==n&&function(t){i.d(e,t,function(){return r[t]})}(n);i(568);var o=i(2),a=Object(o.a)(r.default,s.a,s.b,!1,null,"7c763b94",null);a.options.__file="src/components/loginsubcomp/Header.vue",e.default=a.exports},568:function(t,e,i){"use strict";var s=i(607);i.n(s).a},569:function(t,e,i){"use strict";i.r(e);var s=i(271),r=i(218);for(var n in r)"default"!==n&&function(t){i.d(e,t,function(){return r[t]})}(n);i(570);var o=i(2),a=Object(o.a)(r.default,s.a,s.b,!1,null,"bedb0378",null);a.options.__file="src/components/loginsubcomp/Footer.vue",e.default=a.exports},570:function(t,e,i){"use strict";var s=i(220);i.n(s).a},571:function(t,e,i){(t.exports=i(240)(!1)).push([t.i,"\n.page-footer[data-v-bedb0378] {\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  padding-top: 0;\n  color: #ffffff;\n  background-color: #689f38;\n}\n",""])},572:function(t,e,i){"use strict";var s=i(609);i.n(s).a},578:function(t,e){},580:function(t,e){},607:function(t,e){},609:function(t,e){}},[[565,0,1]]]);